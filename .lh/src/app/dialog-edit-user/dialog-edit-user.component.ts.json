{
    "sourceFile": "src/app/dialog-edit-user/dialog-edit-user.component.ts",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 14,
            "patches": [
                {
                    "date": 1683482076122,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1683482091068,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -8,9 +8,9 @@\n   selector: 'app-dialog-edit-user',\n   templateUrl: './dialog-edit-user.component.html',\n   styleUrls: ['./dialog-edit-user.component.scss']\n })\n-export class DialogEditUserComponent {\n+export default class DialogEditUserComponent {\n  user = new User();\n   birthDate!: Date;\n   isLoading: boolean = false;\n   private userCollection: CollectionReference<DocumentData>;\n"
                },
                {
                    "date": 1683482112384,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -14,9 +14,9 @@\n   birthDate!: Date;\n   isLoading: boolean = false;\n   private userCollection: CollectionReference<DocumentData>;\n \n-  constructor(private firestore: Firestore, public dialogRef: MatDialogRef<DialogAddUserComponent>) {\n+  constructor(private firestore: Firestore, public dialogRef: MatDialogRef<DialogEditUserComponent>) {\n     this.userCollection = collection(this.firestore, 'users');\n   }\n \n   closeDialog(): void{\n"
                },
                {
                    "date": 1683484252941,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,7 +1,8 @@\n import { Component } from '@angular/core';\n-import { CollectionReference, DocumentData, Firestore } from '@angular/fire/firestore';\n+import { CollectionReference, DocumentData, Firestore, doc, docData } from '@angular/fire/firestore';\n import { MatDialogRef } from '@angular/material/dialog';\n+import { ActivatedRoute } from '@angular/router';\n import { addDoc, collection } from '@firebase/firestore';\n import { User } from 'src/models/user.class';\n \n @Component({\n@@ -9,21 +10,47 @@\n   templateUrl: './dialog-edit-user.component.html',\n   styleUrls: ['./dialog-edit-user.component.scss']\n })\n export default class DialogEditUserComponent {\n- user = new User();\n+  user = new User();\n+  userId: string = '';\n   birthDate!: Date;\n   isLoading: boolean = false;\n   private userCollection: CollectionReference<DocumentData>;\n \n-  constructor(private firestore: Firestore, public dialogRef: MatDialogRef<DialogEditUserComponent>) {\n+  constructor(\n+    private firestore: Firestore,\n+    private route: ActivatedRoute,\n+    public dialogRef: MatDialogRef<DialogEditUserComponent>) {\n     this.userCollection = collection(this.firestore, 'users');\n   }\n \n   closeDialog(): void{\n     this.dialogRef.close();\n-   }\n+  }\n+\n+  ngOnInit(): void {\n+    this.route.params.subscribe((params) => {\n+      this.userId = params['id'];\n+      this.setUserData(this.userId);\n+      console.log(this.userId);\n+    })\n+  }\n   \n+  setUserData(userId: string) {\n+    const docRef = doc(this.userCollection, userId);\n+    const userData = docData(docRef);\n+    userData.subscribe((user: any) => {\n+      this.user.firstName = user.firstName;\n+      this.user.lastName = user.lastName;\n+      this.user.email = user.email;\n+      this.user.birthDate = user.birthDate;\n+      this.user.street = user.street;\n+      this.user.city = user.city;\n+      this.user.zipCode = user.zipCode;\n+    })\n+  }\n+  \n \n   save() {\n     this.isLoading = true;\n     let dateInMilliseconds = this.birthDate.getTime();\n"
                },
                {
                    "date": 1683484282730,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -30,10 +30,10 @@\n \n   ngOnInit(): void {\n     this.route.params.subscribe((params) => {\n       this.userId = params['id'];\n+      console.log(this.userId); \n       this.setUserData(this.userId);\n-      console.log(this.userId);\n     })\n   }\n   \n   setUserData(userId: string) {\n"
                },
                {
                    "date": 1683484604161,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,7 +1,7 @@\n-import { Component } from '@angular/core';\n+import { Component, Inject } from '@angular/core';\n import { CollectionReference, DocumentData, Firestore, doc, docData } from '@angular/fire/firestore';\n-import { MatDialogRef } from '@angular/material/dialog';\n+import { MAT_DIALOG_DATA, MatDialogRef } from '@angular/material/dialog';\n import { ActivatedRoute } from '@angular/router';\n import { addDoc, collection } from '@firebase/firestore';\n import { User } from 'src/models/user.class';\n \n@@ -19,37 +19,35 @@\n \n   constructor(\n     private firestore: Firestore,\n     private route: ActivatedRoute,\n-    public dialogRef: MatDialogRef<DialogEditUserComponent>) {\n+    public dialogRef: MatDialogRef<DialogEditUserComponent>,\n+    @Inject(MAT_DIALOG_DATA) public data: any\n+  ) {\n     this.userCollection = collection(this.firestore, 'users');\n   }\n \n   closeDialog(): void{\n     this.dialogRef.close();\n   }\n \n   ngOnInit(): void {\n-    this.route.params.subscribe((params) => {\n-      this.userId = params['id'];\n-      console.log(this.userId); \n-      this.setUserData(this.userId);\n-    })\n+    console.log(this.data);\n   }\n   \n-  setUserData(userId: string) {\n-    const docRef = doc(this.userCollection, userId);\n-    const userData = docData(docRef);\n-    userData.subscribe((user: any) => {\n-      this.user.firstName = user.firstName;\n-      this.user.lastName = user.lastName;\n-      this.user.email = user.email;\n-      this.user.birthDate = user.birthDate;\n-      this.user.street = user.street;\n-      this.user.city = user.city;\n-      this.user.zipCode = user.zipCode;\n-    })\n-  }\n+  // setUserData(userId: string) {\n+  //   const docRef = doc(this.userCollection, userId);\n+  //   const userData = docData(docRef);\n+  //   userData.subscribe((user: any) => {\n+  //     this.user.firstName = user.firstName;\n+  //     this.user.lastName = user.lastName;\n+  //     this.user.email = user.email;\n+  //     this.user.birthDate = user.birthDate;\n+  //     this.user.street = user.street;\n+  //     this.user.city = user.city;\n+  //     this.user.zipCode = user.zipCode;\n+  //   })\n+  // }\n   \n \n   save() {\n     this.isLoading = true;\n"
                },
                {
                    "date": 1683484729465,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -30,24 +30,24 @@\n     this.dialogRef.close();\n   }\n \n   ngOnInit(): void {\n-    console.log(this.data);\n+    this.setUserData(this.data);\n   }\n   \n-  // setUserData(userId: string) {\n-  //   const docRef = doc(this.userCollection, userId);\n-  //   const userData = docData(docRef);\n-  //   userData.subscribe((user: any) => {\n-  //     this.user.firstName = user.firstName;\n-  //     this.user.lastName = user.lastName;\n-  //     this.user.email = user.email;\n-  //     this.user.birthDate = user.birthDate;\n-  //     this.user.street = user.street;\n-  //     this.user.city = user.city;\n-  //     this.user.zipCode = user.zipCode;\n-  //   })\n-  // }\n+  setUserData(userId: string) {\n+    const docRef = doc(this.userCollection, userId);\n+    const userData = docData(docRef);\n+    userData.subscribe((user: any) => {\n+      this.user.firstName = user.firstName;\n+      this.user.lastName = user.lastName;\n+      this.user.email = user.email;\n+      this.user.birthDate = user.birthDate;\n+      this.user.street = user.street;\n+      this.user.city = user.city;\n+      this.user.zipCode = user.zipCode;\n+    })\n+  }\n   \n \n   save() {\n     this.isLoading = true;\n"
                },
                {
                    "date": 1683484915566,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,6 +1,6 @@\n import { Component, Inject } from '@angular/core';\n-import { CollectionReference, DocumentData, Firestore, doc, docData } from '@angular/fire/firestore';\n+import { CollectionReference, DocumentData, Firestore, doc, docData, setDoc } from '@angular/fire/firestore';\n import { MAT_DIALOG_DATA, MatDialogRef } from '@angular/material/dialog';\n import { ActivatedRoute } from '@angular/router';\n import { addDoc, collection } from '@firebase/firestore';\n import { User } from 'src/models/user.class';\n@@ -55,10 +55,12 @@\n     const formattedDate = new Date(dateInMilliseconds).toLocaleDateString(\"de-DE\");\n \n     this.user.birthDate = formattedDate;\n \n-    addDoc((this.userCollection), this.user.toJSON())\n-      .then((result: any) => {\n+    const docRef = doc(this.userCollection, this.userId);\n+    setDoc(docRef, this.user.toJSON())\n+      .then((result) => {\n+        console.log(result);\n         this.isLoading = false;\n         this.closeDialog();\n       });\n   }\n"
                },
                {
                    "date": 1683484980886,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -55,9 +55,9 @@\n     const formattedDate = new Date(dateInMilliseconds).toLocaleDateString(\"de-DE\");\n \n     this.user.birthDate = formattedDate;\n \n-    const docRef = doc(this.userCollection, this.userId);\n+    const docRef = doc(this.userCollection, this.data);\n     setDoc(docRef, this.user.toJSON())\n       .then((result) => {\n         console.log(result);\n         this.isLoading = false;\n"
                },
                {
                    "date": 1683485012193,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -58,9 +58,8 @@\n \n     const docRef = doc(this.userCollection, this.data);\n     setDoc(docRef, this.user.toJSON())\n       .then((result) => {\n-        console.log(result);\n         this.isLoading = false;\n         this.closeDialog();\n       });\n   }\n"
                },
                {
                    "date": 1683485679617,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -44,8 +44,9 @@\n       this.user.birthDate = user.birthDate;\n       this.user.street = user.street;\n       this.user.city = user.city;\n       this.user.zipCode = user.zipCode;\n+      console.log(user.birthDate);\n     })\n   }\n   \n \n"
                },
                {
                    "date": 1683485705596,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -44,9 +44,8 @@\n       this.user.birthDate = user.birthDate;\n       this.user.street = user.street;\n       this.user.city = user.city;\n       this.user.zipCode = user.zipCode;\n-      console.log(user.birthDate);\n     })\n   }\n   \n \n"
                },
                {
                    "date": 1683487825863,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -51,8 +51,9 @@\n \n   save() {\n     this.isLoading = true;\n     let dateInMilliseconds = this.birthDate.getTime();\n+    console.log(dateInMilliseconds);\n     const formattedDate = new Date(dateInMilliseconds).toLocaleDateString(\"de-DE\");\n \n     this.user.birthDate = formattedDate;\n \n"
                },
                {
                    "date": 1683488004268,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -50,10 +50,15 @@\n   \n \n   save() {\n     this.isLoading = true;\n-    let dateInMilliseconds = this.birthDate.getTime();\n-    console.log(dateInMilliseconds);\n+    let dateInMilliseconds = 0;\n+    try {\n+      dateInMilliseconds = this.birthDate.getTime();\n+    } catch {\n+      console.log(\"FEHLER\");\n+    }\n+\n     const formattedDate = new Date(dateInMilliseconds).toLocaleDateString(\"de-DE\");\n \n     this.user.birthDate = formattedDate;\n \n"
                },
                {
                    "date": 1683488142895,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -51,13 +51,9 @@\n \n   save() {\n     this.isLoading = true;\n     let dateInMilliseconds = 0;\n-    try {\n-      dateInMilliseconds = this.birthDate.getTime();\n-    } catch {\n-      console.log(\"FEHLER\");\n-    }\n+    try {dateInMilliseconds = this.birthDate.getTime();} catch {}\n \n     const formattedDate = new Date(dateInMilliseconds).toLocaleDateString(\"de-DE\");\n \n     this.user.birthDate = formattedDate;\n"
                }
            ],
            "date": 1683482076122,
            "name": "Commit-0",
            "content": "import { Component } from '@angular/core';\nimport { CollectionReference, DocumentData, Firestore } from '@angular/fire/firestore';\nimport { MatDialogRef } from '@angular/material/dialog';\nimport { addDoc, collection } from '@firebase/firestore';\nimport { User } from 'src/models/user.class';\n\n@Component({\n  selector: 'app-dialog-edit-user',\n  templateUrl: './dialog-edit-user.component.html',\n  styleUrls: ['./dialog-edit-user.component.scss']\n})\nexport class DialogEditUserComponent {\n user = new User();\n  birthDate!: Date;\n  isLoading: boolean = false;\n  private userCollection: CollectionReference<DocumentData>;\n\n  constructor(private firestore: Firestore, public dialogRef: MatDialogRef<DialogAddUserComponent>) {\n    this.userCollection = collection(this.firestore, 'users');\n  }\n\n  closeDialog(): void{\n    this.dialogRef.close();\n   }\n  \n\n  save() {\n    this.isLoading = true;\n    let dateInMilliseconds = this.birthDate.getTime();\n    const formattedDate = new Date(dateInMilliseconds).toLocaleDateString(\"de-DE\");\n\n    this.user.birthDate = formattedDate;\n\n    addDoc((this.userCollection), this.user.toJSON())\n      .then((result: any) => {\n        this.isLoading = false;\n        this.closeDialog();\n      });\n  }\n}\n"
        }
    ]
}