{
    "sourceFile": "src/app/login/sign-in/sign-in.component.ts",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 19,
            "patches": [
                {
                    "date": 1683569307969,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1683570102253,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,11 +1,16 @@\n-import { Component, inject} from '@angular/core';\n-import { Auth } from '@angular/fire/auth';\n+import { Component, OnInit, inject} from '@angular/core';\n+import { Auth, User, user } from '@angular/fire/auth';\n \n @Component({\n   selector: 'app-sign-in',\n   templateUrl: './sign-in.component.html',\n   styleUrls: ['./sign-in.component.scss']\n })\n-export class SignInComponent {\n+export class SignInComponent implements OnInit {\n   private auth: Auth = inject(Auth);\n+  user$ = user(this.auth);\n+\n+  ngOnInit(): void {\n+      console.log(this.user$);\n+  }\n }\n"
                },
                {
                    "date": 1683575575145,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,16 +1,21 @@\n import { Component, OnInit, inject} from '@angular/core';\n-import { Auth, User, user } from '@angular/fire/auth';\n+import { getAuth, createUserWithEmailAndPassword } from '@angular/fire/auth';\n \n @Component({\n   selector: 'app-sign-in',\n   templateUrl: './sign-in.component.html',\n   styleUrls: ['./sign-in.component.scss']\n })\n export class SignInComponent implements OnInit {\n-  private auth: Auth = inject(Auth);\n-  user$ = user(this.auth);\n+  auth = getAuth();\n+  email = '';\n+  password = '';\n \n+  constructor() {}\n+\n   ngOnInit(): void {\n-      console.log(this.user$);\n-  }\n+    createUserWithEmailAndPassword(this.auth, this.email, this.password)\n+    .then\n+   }\n+\n }\n"
                },
                {
                    "date": 1683732952974,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,21 +1,21 @@\n import { Component, OnInit, inject} from '@angular/core';\n import { getAuth, createUserWithEmailAndPassword } from '@angular/fire/auth';\n+import { User } from 'src/models/user.class';\n \n @Component({\n   selector: 'app-sign-in',\n   templateUrl: './sign-in.component.html',\n   styleUrls: ['./sign-in.component.scss']\n })\n export class SignInComponent implements OnInit {\n   auth = getAuth();\n+  userCredential = new User()\n   email = '';\n   password = '';\n \n   constructor() {}\n \n   ngOnInit(): void {\n-    createUserWithEmailAndPassword(this.auth, this.email, this.password)\n-    .then\n    }\n \n }\n"
                },
                {
                    "date": 1683733159512,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,21 +1,70 @@\n-import { Component, OnInit, inject} from '@angular/core';\n-import { getAuth, createUserWithEmailAndPassword } from '@angular/fire/auth';\n-import { User } from 'src/models/user.class';\n+import { Component, OnInit } from '@angular/core';\n+import { FormBuilder, FormGroup, Validators } from '@angular/forms';\n+import { MatSnackBar } from '@angular/material/snack-bar';\n+import { Router } from '@angular/router';\n+import { AuthenticationService } from './services/authentication.service';\n \n @Component({\n   selector: 'app-sign-in',\n   templateUrl: './sign-in.component.html',\n   styleUrls: ['./sign-in.component.scss']\n })\n export class SignInComponent implements OnInit {\n-  auth = getAuth();\n-  userCredential = new User()\n-  email = '';\n-  password = '';\n \n-  constructor() {}\n+  form!: FormGroup;\n+  isLoggingIn = false;\n+  isRecoveringPassword = false;\n \n+  constructor(\n+    private authenticationService: AuthenticationService,\n+    private formBuilder: FormBuilder,\n+    private router: Router,\n+    private snackBar: MatSnackBar\n+  ) { }\n+\n   ngOnInit(): void {\n-   }\n+    this.form = this.formBuilder.group({\n+      email: ['', [Validators.required, Validators.email]],\n+      password: ['', [Validators.required]]\n+    });\n+  }\n \n-}\n+  login() {\n+    this.isLoggingIn = true;\n+\n+    this.authenticationService.signIn({\n+      email: this.form.value.email,\n+      password: this.form.value.password\n+    }).subscribe({\n+      next: () => this.router.navigate(['home']),\n+      error: error => {\n+        this.isLoggingIn = false;\n+        this.snackBar.open(error.message, \"OK\", {\n+          duration: 5000\n+        })\n+      }\n+    });\n+  }\n+\n+  recoverPassword() {\n+    this.isRecoveringPassword = true;\n+\n+    this.authenticationService.recoverPassword(\n+      this.form.value.email\n+    ).subscribe({\n+      next: () => {\n+        this.isRecoveringPassword = false;\n+        this.snackBar.open(\"You can recover your password in your email account.\", \"OK\", {\n+          duration: 5000\n+        });\n+      },\n+      error: error => {\n+        this.isRecoveringPassword = false;\n+        this.snackBar.open(error.message, \"OK\", {\n+          duration: 5000\n+        });\n+      }\n+    })\n+  }\n+\n+}\n\\ No newline at end of file\n"
                },
                {
                    "date": 1683820400391,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -35,9 +35,9 @@\n     this.authenticationService.signIn({\n       email: this.form.value.email,\n       password: this.form.value.password\n     }).subscribe({\n-      next: () => this.router.navigate(['home']),\n+      next: () => this.router.navigate(['dashboard']),\n       error: error => {\n         this.isLoggingIn = false;\n         this.snackBar.open(error.message, \"OK\", {\n           duration: 5000\n"
                },
                {
                    "date": 1683903867457,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -35,9 +35,9 @@\n     this.authenticationService.signIn({\n       email: this.form.value.email,\n       password: this.form.value.password\n     }).subscribe({\n-      next: () => this.router.navigate(['dashboard']),\n+      next: () => this.router.navigate(['home/dashboard']),\n       error: error => {\n         this.isLoggingIn = false;\n         this.snackBar.open(error.message, \"OK\", {\n           duration: 5000\n"
                },
                {
                    "date": 1685267867314,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -29,8 +29,9 @@\n     });\n   }\n \n   login() {\n+    console.log(this.form.value.email);\n     this.isLoggingIn = true;\n \n     this.authenticationService.signIn({\n       email: this.form.value.email,\n"
                },
                {
                    "date": 1685267892001,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -29,9 +29,9 @@\n     });\n   }\n \n   login() {\n-    console.log(this.form.value.email);\n+    console.log(this.form.value);\n     this.isLoggingIn = true;\n \n     this.authenticationService.signIn({\n       email: this.form.value.email,\n"
                },
                {
                    "date": 1685267978209,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -29,9 +29,8 @@\n     });\n   }\n \n   login() {\n-    console.log(this.form.value);\n     this.isLoggingIn = true;\n \n     this.authenticationService.signIn({\n       email: this.form.value.email,\n"
                },
                {
                    "date": 1685292065270,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -47,9 +47,8 @@\n   }\n \n   recoverPassword() {\n     this.isRecoveringPassword = true;\n-\n     this.authenticationService.recoverPassword(\n       this.form.value.email\n     ).subscribe({\n       next: () => {\n@@ -65,6 +64,5 @@\n         });\n       }\n     })\n   }\n-\n }\n\\ No newline at end of file\n"
                },
                {
                    "date": 1685296851244,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -9,9 +9,9 @@\n   templateUrl: './sign-in.component.html',\n   styleUrls: ['./sign-in.component.scss']\n })\n export class SignInComponent implements OnInit {\n-\n+  tokenName = 'token';\n   form!: FormGroup;\n   isLoggingIn = false;\n   isRecoveringPassword = false;\n \n@@ -35,9 +35,12 @@\n     this.authenticationService.signIn({\n       email: this.form.value.email,\n       password: this.form.value.password\n     }).subscribe({\n-      next: () => this.router.navigate(['home/dashboard']),\n+      next: () => {\n+        localStorage.setItem(this.tokenName, 'token');\n+        this.router.navigate(['home/dashboard'])\n+      },\n       error: error => {\n         this.isLoggingIn = false;\n         this.snackBar.open(error.message, \"OK\", {\n           duration: 5000\n"
                },
                {
                    "date": 1685305967825,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -48,8 +48,13 @@\n       }\n     });\n   }\n \n+  guestLogin() {\n+    localStorage.setItem(this.tokenName, 'guest-token');\n+    this.router.navigate(['home/dashboard']);\n+  }\n+\n   recoverPassword() {\n     this.isRecoveringPassword = true;\n     this.authenticationService.recoverPassword(\n       this.form.value.email\n"
                },
                {
                    "date": 1685306757889,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -53,8 +53,12 @@\n     localStorage.setItem(this.tokenName, 'guest-token');\n     this.router.navigate(['home/dashboard']);\n   }\n \n+  signInWithGoogle() {\n+    this.authenticationService.signInWithGoogle();\n+  }\n+\n   recoverPassword() {\n     this.isRecoveringPassword = true;\n     this.authenticationService.recoverPassword(\n       this.form.value.email\n"
                },
                {
                    "date": 1685308189040,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -2,8 +2,10 @@\n import { FormBuilder, FormGroup, Validators } from '@angular/forms';\n import { MatSnackBar } from '@angular/material/snack-bar';\n import { Router } from '@angular/router';\n import { AuthenticationService } from './services/authentication.service';\n+import { CollectionReference, DocumentData, Firestore, addDoc, collection } from '@angular/fire/firestore';\n+import { User } from 'src/models/user.class';\n \n @Component({\n   selector: 'app-sign-in',\n   templateUrl: './sign-in.component.html',\n@@ -13,15 +15,20 @@\n   tokenName = 'token';\n   form!: FormGroup;\n   isLoggingIn = false;\n   isRecoveringPassword = false;\n+  user = new User();\n+  private userCollection: CollectionReference<DocumentData>;\n \n   constructor(\n     private authenticationService: AuthenticationService,\n     private formBuilder: FormBuilder,\n     private router: Router,\n-    private snackBar: MatSnackBar\n-  ) { }\n+    private snackBar: MatSnackBar,\n+    private firestore: Firestore,\n+  ) {\n+    this.userCollection = collection(this.firestore, 'users');\n+  }\n \n   ngOnInit(): void {\n     this.form = this.formBuilder.group({\n       email: ['', [Validators.required, Validators.email]],\n@@ -76,5 +83,9 @@\n         });\n       }\n     })\n   }\n+\n+  addNewRegisteredUser() {\n+    addDoc((this.userCollection), this.user.toJSON());\n+  }\n }\n\\ No newline at end of file\n"
                },
                {
                    "date": 1685308628359,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -83,9 +83,5 @@\n         });\n       }\n     })\n   }\n-\n-  addNewRegisteredUser() {\n-    addDoc((this.userCollection), this.user.toJSON());\n-  }\n }\n\\ No newline at end of file\n"
                },
                {
                    "date": 1685352312349,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -55,8 +55,24 @@\n       }\n     });\n   }\n \n+  register() {\n+    this.authenticationService.signUp({\n+      email: this.form.value.email,\n+      password: this.form.value.password\n+    }).subscribe({\n+      next: () => {\n+        this.router.navigate(['']);\n+      },\n+      error: error => {\n+        this.snackBar.open(error.message, \"OK\", {\n+          duration: 5000\n+        })\n+      }\n+    })\n+  }\n+\n   guestLogin() {\n     localStorage.setItem(this.tokenName, 'guest-token');\n     this.router.navigate(['home/dashboard']);\n   }\n"
                },
                {
                    "date": 1685352635738,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -61,9 +61,9 @@\n       email: this.form.value.email,\n       password: this.form.value.password\n     }).subscribe({\n       next: () => {\n-        this.router.navigate(['']);\n+        this.router.navigate(['home/dashboard']);\n       },\n       error: error => {\n         this.snackBar.open(error.message, \"OK\", {\n           duration: 5000\n"
                },
                {
                    "date": 1685352727872,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -61,8 +61,9 @@\n       email: this.form.value.email,\n       password: this.form.value.password\n     }).subscribe({\n       next: () => {\n+        localStorage.setItem(this.tokenName, 'token');\n         this.router.navigate(['home/dashboard']);\n       },\n       error: error => {\n         this.snackBar.open(error.message, \"OK\", {\n"
                },
                {
                    "date": 1685352825722,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -61,10 +61,11 @@\n       email: this.form.value.email,\n       password: this.form.value.password\n     }).subscribe({\n       next: () => {\n-        localStorage.setItem(this.tokenName, 'token');\n-        this.router.navigate(['home/dashboard']);\n+        this.snackBar.open(\"Account created. You can log in now.\", \"OK\", {\n+          duration: 5000\n+        })\n       },\n       error: error => {\n         this.snackBar.open(error.message, \"OK\", {\n           duration: 5000\n"
                }
            ],
            "date": 1683569307969,
            "name": "Commit-0",
            "content": "import { Component, inject} from '@angular/core';\nimport { Auth } from '@angular/fire/auth';\n\n@Component({\n  selector: 'app-sign-in',\n  templateUrl: './sign-in.component.html',\n  styleUrls: ['./sign-in.component.scss']\n})\nexport class SignInComponent {\n  private auth: Auth = inject(Auth);\n}\n"
        }
    ]
}